# Upstox API Options Data Analysis Tool
This project is a Python-based tool that interfaces with the Upstox API to retrieve and analyze option
chain data for a specified financial instrument. It calculates the margin requirements and premium
earned for options based on the given parameters.
## Project Structure
main.py: Contains the main code, divided into the following sections:
o API Authentication: Authenticates with the Upstox API using OAuth to retrieve an
access token.
o get_option_chain_data: Fetches option chain data and filters it based on side
(Put/Call) to extract the highest bid or ask prices.
o calculate_margin_and_premium: Calculates margin requirements and premium
earned for each option in the DataFrame.

requirements.txt: Specifies required Python packages for running this tool.
README.md: Project documentation (this file).
Setup Instructions
1. Clone the repository and navigate to the project directory.
2. Install dependencies:
pip install -r requirements.txt
3. Add a .env file in the root directory with your Upstox API key and secret:
UPSTOX_API_KEY=your_api_key_here
UPSTOX_API_SECRET=your_api_secret_here
## Usage
Authentication Process
The script uses OAuth for authentication, requiring users to:
1. Run the script and visit the provided Upstox login URL.
2. Enter the authorization code generated after authorization.
## Functions Overview
1. get_option_chain_data(instrument_name, expiry_date, side):
o Purpose: Fetches options data based on instrument name, expiry date, and option
type (CE or PE).
o Input Parameters:
 instrument_name: The ticker symbol (e.g., NIFTY).
 expiry_date: Expiry date in YYYY-MM-DD format.

 side: Specifies option type (PE for Put, CE for Call).
o Returns: DataFrame with filtered options data and highest bid/ask prices.
2. calculate_margin_and_premium(data):
o Purpose: Computes margin and premium for each option.
o Input Parameters:
 data: DataFrame generated by get_option_chain_data.
o Returns: Updated DataFrame with calculated margin and premium for each option.

## Sample Run
instrument_name = &quot;NIFTY&quot;
expiry_date = &quot;2024-11-30&quot;
side = &quot;PE&quot; # &quot;CE&quot; for Call, &quot;PE&quot; for Put

## Retrieve option chain data
option_chain_data = get_option_chain_data(instrument_name, expiry_date, side)

## Calculate margin and premium
final_data = calculate_margin_and_premium(option_chain_data)
print(final_data)
Acknowledgments
This code was developed using guidance and reference code from ChatGPT, particularly for API
requests, data handling, and structure.
